---
title: mysql 建表规范
date: 2021-08-11 19:18:36
categories: 
  - mysql
sidebar: auto
permalink: /mysql/mysql-db-design-standard/
---



1. 所有表一定要设计一个主键。因为你不设主键的情况下，innodb也会帮你生成一个隐藏列，作为自增主键。
2. 如果不涉及分布式系统，和未来分库分表需求，使用自增主键，否则使用 UUID。
3. 主键不应该有任何业务含义。因为任何有业务含义的列都有改变的可能性,主键一旦带上了业务含义，那么主键就有可能发生变更。
4. 枚举字段不使用 **enum**  使用 tinyint 代替。避免操作陷阱，以及未来拓展方便。
5. 如果货币单位是分，可以用`Int`类型，如果坚持用元，用`Decimal`。float、double 存在精度问题。
6. 时间字段统一使用 datetime。 避免 timestamp 的时间范围问题，以及时区问题，datetime 使用的 8 个字节存储的空间满足开发中基本所有需求。
7. 不允许使用 blob 类型，不建议使用 text 类型。mysql 在排序、关联的时候无法对改字段使用内存临时表，造成查询缓慢的问题。同时也会造成 binlog 过大，主从同步缓慢的问题。
8. 可选字段定义为 **NOT NULL**。Mysql难以优化引用可空列查询，它会使索引、索引统计和值更加复杂。可空列需要更多的存储空间，还需要mysql内部进行特殊处理。并且查询有陷阱，需要使用 is null 这种方式查询，另外 count 等聚合函数会自动忽略。
