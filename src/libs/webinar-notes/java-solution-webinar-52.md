---
title: 技术方案 Webinar - 架构设计有什么常见的难点
date: 2024-03-09 20:54:03
sidebar: true
head:
- - meta
- name: keyword
  content:  架构设计有什么常见的难点
  description:  架构设计有什么常见的难点
---

## 解决系统设计问题难点的思路

- 根据矛盾的思想，解决所有的矛盾是不现实的，就找到主要矛盾，解决主要矛盾。
- 枚举出可行的常见方案，根据可以容忍的限制条件，**做一个不那么差的选择**。找**容忍点**。例如，可以停机、暂时某个业务、按批次隔离、延迟、可用性下降、成本、资源消耗。
- 第一性原则，先回归原始问题，再看方案，避免 XY problem 的错误路径。
- 设计前就要对齐，设计指标，做到什么，什么不做！提前厘清约束，特别是隐藏的约束。
- 问题出发和目标出发，聚焦目标，例如可能存在长期目标和短期目标冲突。
- 谨慎：为了技术卓越做事，而做一些有价值的事情，不要为了技术而技术。
- 积累更多的方案，解决自己不知道的问题。
- 寻求外部意见，人需要承认自己的无知。

## 架构设计有什么常见的难点

- 业务逻辑非常复杂，但是又要求性能非常高。思路：和业务沟通，想一切办法找可以容忍的地方，比如缓存一些计算过程，或者偷用户体验，例如把一个接口拆分为多个，偷偷提前加载。
- 分布式系统中，可用性和一致性的矛盾。例如，分布式授权场景，避免集中的 Token 存储，但是，可能需要撤回 Token；例如2，数据被存放在多个服务，但是可能需要统一更新，例如库存，或者关联查询。例如库存和价格需要同时在一个列表中查询出来。
- 当业务和合规政策冲突时，如何设计。例如，只能存 user_id，不能存储用户名、信用卡等信息，这时候如何设计？
- 领域模型的提取非常困难，抽象层次稳定。矛盾：希望有一个共享的领域模型，和不同场景对该领域模型的定义不一致之间的矛盾。如果选择了不定义共享的领域模型，那么需要容忍重复修改和代码冗余。例如在有些场景下，冗余反而是一个好的选择。
- 遗留系统切换，如何让两套系统同时运行，并且让业务平滑切换。常见矛盾：数据一致性汇总，和应用分离之间的矛盾。例如：在新系统中下单，在老系统中取消了订单。
  - 目标：平滑切换，约束是不要刀切。
  - 可以容忍的约束（尽量多找业务方找到**容忍点**）：根据颗粒度用户或者部门切换，被切换的单位，在**老系统可读**，新系统可写、可读，如果回到老系统完成业务，将完成后的业务数据同步到新系统，在新系统设置为只读。
- 复用和灵活性之间的矛盾。老板说抽一个业务中台，但是这个中台复用性不强，带来额外成本。


## 相关参考资料

### 灵活性和复用之间维度和层次（复用的程度）

复用性和灵活性成反比，寻找合适的复用程度。

  - coding-  多态
  - 服务-组件    模块化
  - 通信     数据，网络 防腐   进程间通信
  - 依赖：  IOC   总线，EDA  事件驱动
  - 流程   状态机-  流程引擎  事件驱动
  - 服务化  中台   事件驱动

## 录屏

链接: https://pan.baidu.com/s/1CDxcpzAuuQq3v1LI25dT7A?pwd=4pcr 提取码: 4pcr 复制这段内容后打开百度网盘手机App，操作更方便哦


