---
title: 技术方案 Webinar -  活文档
date: 2023-09-09 20:54:03
sidebar: true
head:
- - meta
- name: keyword
  content:  文档生成，活文档
  description:  如何低成本从项目中提取出文档。
---

## 话题背景《活文档：与代码共同演进》

话题来源于一本书。

## 案例 使用 Excel 和代码之间做双向映射

Nop 框架，业务层的东西尽量使用 DSL 开发，避免使用 Java 开发。

参考地址：https://github.com/entropy-cloud/nop-entropy

## 问题1：活文档的价值是什么？

- 业务参与：和需求对齐，可以将业务的部分需求直接转换为实现，在更新的时候保持业务需求和实现一致。例如，使用模型驱动，修改后不会和手写的代码所冲突，需要隔离。参考案例，Nop 框架，低代码开发等平台。
- 输出准确的文档：解决设计态和实现态的差异，设计态文档可以抛弃，得到实现态准确信息。设计态文档抛弃，可以使用实现态文档，并输出各种格式，并随代码一起发布，作为交付物存在。
- 从代码中提取业务知识：反向从代码中抽取信息，用于其它使用场景。例如财务软件需要提取出一些计算公式。业务人员 BA 验证当前系统的状态。

## 问题2：如何区分设计态文档和实现文档？

设计态文档自动生成代码，实现态代码提取文档。

- 在实际项目中文档是怎么维护？
  - 思路 1：保持设计文档更新。
  - 思路 2：设计态文档维护至迭代版本发布时，不再维护，实现态文档版本发布时自动提取和更新，作为软件产品的一部分。

## 问题3：如何从项目中低成本提取文档？

- API 设计：Swagger 自动提取
- 数据字典（枚举：注解扫描
- 业务规则：yaml 读取
- 定时任务：数据库提取
- 主数据表：数据库提前在产品上做一个功能
- 技术债：注解扫描
- ……

## 问题4：项目中有必要维护的文档有哪些？是否可以自动生成？

- 设计态文档（写代码使用）
  - 领域模型图（聚合、类、枚举）
  - 时序图
  - API 设计
  - 数据库 DDL（可选，可以从领域模型推导）
  - 业务规则
- 实现态文档（交付给业务人员，市场，其它对接团队）
  - API 设计（Swagger 自动提取）
  - 业务规则
  - 数据字典（枚举）
  - 架构图

## 心得

- 自动化代码生成需要和手写代码隔离。
- 从业务拿到的需求就是形式化的，可以自动化推导到实现。
- 活文档本质和 DSL 一脉相承的，是将部分知识提取出来不使用图灵完备的语言来表达，再不得不使用图灵完备的语言进行描述。软件工程的本质是对业务知识进行形式。
- DSL、框架、平台、低代码本质是业务知识模型特征的分级。

## 参考资料

- 元数据转化为百度的amis底层的json https://aisuda.bce.baidu.com/amis/zh-CN/docs/index

## 录屏

链接: https://pan.baidu.com/s/1qIctBHC7AaZXIGWzXnWIBg?pwd=6du4 提取码: 6du4 复制这段内容后打开百度网盘手机App，操作更方便哦
