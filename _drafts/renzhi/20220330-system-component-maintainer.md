---
title: 分享 | 架构设计中的责任主体
toc: true
categories: 
  - 高认知软件工程星球
sidebar: auto
---

有人问，微服务间 Redis 共享，是一种架构坏味道么？

在微服务设计中，数据库共享是被尽量避免的， Redis 是一种数据库，所以 Redis 共享应该被尽量避免。

从业务影响的角度看，Redis 如果共享的话，那 Redis挂了就全挂了。

但是这不是不可克服的问题。

从主客体角度，维护这个 Redis 的团队说不清楚，权责也乱，属于“金三角”地区。

服务的维护者可以被看做责任主体，架构师只需要清晰的定义出系统中所有的组件的能力，并找到相应的维护者，明确维护者的责任、权利、利益，就能将大型系统拆分的井井有条。

很明显，业务能力和 Redis 这种基础设施的数据访问能力是两个层次的事。直接暴露基础设施会造成滥用，这个 Redis 实例被使用的范围也会被扩大。

我们应该明确被共享的 Redis 提供了什么能力，由什么团队维护，谁有权限访问。所以，最好将其封装为一组服务，提供明确的业务能力。比如共享会话、页面访问统计、验证码等。

如果封装为 REST API 的服务，性能可能会受到影响，可以考虑封装为 SDK，并有专门的团队管理。

反之，如果不这样做，直接暴露 Redis 给各个业务系统使用，会造成管理混乱，以至于权限难以再收回了。

