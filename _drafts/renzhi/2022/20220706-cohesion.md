---
title: 分享 | 并非所有的内聚都是好的
toc: true
categories: 
  - 高认知软件工程星球
sidebar: auto
---

人人都在谈论高内聚低耦合，那么它真的好吗？

维基百科对内聚的定义：

> 内聚性（Cohesion）也称为内聚力，是一软件度量，是指机能相关的程序组合成一模块的程度，或是各机能凝聚的状态或程度。

并非所有的内聚都是好的，不合适的内聚就是耦合。所以高内聚低耦合是不可能的，出现了高内聚就会出现耦合，这是一对孪生兄弟。

我们想要的不是高内聚低耦合，而是合适的内聚和合适的耦合。

举个例子，当我们对不变点识别得非常清楚后，不变点可以进行内聚，也就意味耦合到一起。如果在未来不变点变成了变化点，那么原来的良好的内聚就成了糟糕的耦合。

因此对于内聚来说，我们需要分开来看待：

- 偶然内聚性: 偶然内聚只是把毫无相关的组件恰好放到了一起，这是最不合适的内聚。
- 逻辑内聚性：流程或者逻辑的相似的组件放到了一起，看似复用了，但是耦合了。
- 时间性内聚性: 执行时间相似的内聚到一起，和逻辑内聚类似。
- 通信内聚: 将频繁信息交换的组件内聚到一起，这类内聚往往是迫不得已的内聚关系。
- 职责内聚性: 将职责（权责）一致的组件内聚到一起，完成相对完整的能力，这是最好的内聚关系。

其实，不是所有的内聚都有价值，当业务并没有稳定的呈现组件职责时，内聚并非是一件好事。

