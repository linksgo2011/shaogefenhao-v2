---
title: 分享 | 建模的比喻
toc: true
categories: 
  - 高认知软件工程星球
sidebar: auto
---

有朋友提了一个问题：模型间是一对一关系是不是一种坏味道？

如果我们用对错来评价这个问题就会陷入极端，模型是人为定义的，很难说得上对错。

现代人和手机天天在一起，如果一个人只有一个手机，就是一对一关系。这就好比，创造人类现实世界的上帝程序员在群里问：一对一是不是个反模式？

我们主要看模型是不是合适，这样处理是否有什么代价。比如不方便处理，或者性能低下。

所以互联网公司为了性能，牺牲一致性，降低范式，用大宽表也没毛病。将一对一关系合并起来了，但是当有特别需要的时候又需要拆分。

比如需要文章基本信息和文章内容往往需要拆开，因为这样可以减小基本信息的规模，文章内容又不需要索引。

所以互联网公司为了性能，牺牲一致性，降低范式，用大宽表也没毛病。代价就是要用一堆 MQ 同步消息。但是你要给他说拆分成小对象然后聚合，他们基本不能接受。

就像以前手机电池可以换，但是现在为了压榨空间，手机和电池就变成了一个实体。当然将数据库物理模型和领域模型分开处理也可以，代价就变成了程序员认知负担提高了。

这让我想起想到另外一个比喻：

建模就像做陶器，就是把数据这种没有概念的泥巴捏成有概念的瓶瓶罐罐。

茶壶盖子和茶壶是两个实体却必须聚合起来，因为在业务上是一致的。

要配上杯子就能喝茶，实现相对独立的业务能力，是不是有点像 DDD 中的限界上下文？

捏泥巴能有对错吗？

