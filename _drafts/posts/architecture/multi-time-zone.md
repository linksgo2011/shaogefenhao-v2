---
title: 系统设计 | 国际化之时间问题
date: 时间
sidebar: auto
category: 
  - 软件架构
head:
  - - meta
    - name: keyword
      content: 多时区，国际化
      description: 关于时间的问题需要考虑哪些问题？
---

大部分程序员都会遇到过类似的 Bug：用户创建或者更新的数据在查询时偏移了 8 个小时。

我们有时候会在网上找一些文章，胡乱的配置后问题修复了，但是过一段时间后往往又会出现。

时间和时区的问题往往就像幽灵一样发生在程序员身上。

这一期的系统设计话题我们来盘点一下时间的问题，澄清相关的概念，以及相关的解决方案。

## 生活中的时间和时区

战国末期的尸佼说，天地四方曰宇，往古来今曰宙，其中宙就是指的时间。

从古至今，时间都是一个非常重要的话题。 古人在观察月亮运行轨迹的时候，发现每一轮季节的交替，月亮会亏盈12次。于是他们定义了年、月、日、时。

- 年：四季交替一次
- 月：盈亏一次
- 日：日出日落一次
- 时：没有明显特征，于是参考 12 个月，将日继续划分为 12 份。

古人称为四柱，每柱用天干地支两个字表示，所以达到古人的计时精度用八个字表示，这就是四柱八字的由来。

计时方法到日这个粒度世界各地几乎没有差异，但是日的精度不能满足生产生活需要，需要进一步划分。一种解释是按照一年中的月数，这样就有了12个时辰；另外一种解释是手的食指至小指之间地指骨个数，据说这是西方 24 小时制的起源，比较严谨的说法是 "古希腊天文学家，包括希巴谷和托勒密，定义太阳日的24分之一为时。"

时被分割为 60 分，分又被分割为 60 秒，六十进位制来自巴比伦，其原理是对圆的划分。精确定义分钟和秒钟是通过摆钟完成的，由于摆钟的振动频率主要取决其引用摆长，因此可以通过定义标准的摆长。在地球表面，一米的单摆一次摆动周期的时间大约一秒。

随着秒的定义，逐渐得到了 年、月、日、时、分、秒 6 个时间单位，其中秒是时间的标准单位。可以使用秒作为后置词表示不同精度的单位，例如分秒、厘秒、毫秒、微秒等。在国际单位制中，比秒长的时间也可以用秒定义，例如十秒、千秒，但不符合人们计时习惯，除了科学界基本不会使用。

总体来说，时间单位是一笔糊涂账，其中包含有 12/24  进制、60 进制、10 进制，以及不同地区的表示方法和历法。

由于比日小的单位是通过对日的划分，而世界各地人们对于日出日落感知并不相同，于是不得不考虑各个地区的需求，在同一套计时系统下，某些地区的 24:00 在中午，有些地区却在深夜。在农业社会影响不大，各地使用自己的计时系统，但是进入工业社会后跨时区交流变得频繁，迫切需要统一的计时系统。

1870 年代加拿大铁路工程师史丹佛·佛莱明首次提出世界按统一标准划分时区，1884 年华盛顿召开的子午线国际会议确立了世界标准时制度。

## 程序中的时间概念

## Java 中时间选择

## 前端的时间方案和库

## 参考资料

- https://en.wikipedia.org/wiki/Time_zone
- 公司内部博客：《拨开时间迷雾》
- 
